(this.webpackJsonphimalaya=this.webpackJsonphimalaya||[]).push([[0],{138:function(e,t,a){e.exports=a(292)},143:function(e,t,a){},144:function(e,t,a){},145:function(e,t,a){},146:function(e,t,a){},292:function(e,t,a){"use strict";a.r(t);var n=a(1),r=a.n(n),s=a(13),o=a.n(s),l=(a(143),a(144),a(136)),c=a(20),i=a(38),m=a(39),u=a(45),d=a(44),p=a(131),h=a.n(p),g=(a(92),a(145),a(146),a(21)),f=function(e){Object(u.a)(a,e);var t=Object(d.a)(a);function a(e){var n;return Object(i.a)(this,a),(n=t.call(this,e)).openNav=function(){n.setState({width:"100%"})},n.closeNav=function(){n.setState({width:"0%"})},n.state={width:"0%"},n}return Object(m.a)(a,[{key:"render",value:function(){return r.a.createElement("div",{style:{float:"left"}},r.a.createElement("div",{style:{width:this.state.width},id:"myNav",className:"overlay"},r.a.createElement("a",{href:"#",className:"closebtn",onClick:this.closeNav},"\xd7"),r.a.createElement("div",{className:"overlay-content"},r.a.createElement(g.c,{to:"/home"},"Home"),r.a.createElement(g.c,{to:"/customer"},"Receipts"),r.a.createElement("a",{target:"blank",href:window.API_URL+"/admin/"},"Admin"))),r.a.createElement("span",{style:{fontSize:"40px",cursor:"pointer",color:"white"},onClick:this.openNav},"\u2630"))}}]),a}(n.Component),E=a(23),v=a.n(E),b=a(130),y=a.n(b),_=a(80),N=function(e){Object(u.a)(a,e);var t=Object(d.a)(a);function a(e){var n,r;Object(i.a)(this,a),(r=t.call(this,e)).componentDidMount=function(){v.a.get(window.API_URL+"/receipts/products/",r.state).then((function(e){if(200!==e.status)return alert("erro occurred: Unknown error occurred"),[];r.setState({products:e.data.Data})})).catch((function(e){alert("error occurred "+e.toString())})),v.a.get(window.API_URL+"/receipts/names/").then((function(e){200==e.status?r.setState({cust_names:e.data.Data}):alert(e.error.error.toString()+" Unknown Error Occurred")})).catch((function(e){alert("error occurred "+e.toString())})),v.a.get(window.API_URL+"/receipts/addresses/").then((function(e){200==e.status?r.setState({cust_addresses:e.data.Data}):alert(e.error.error.toString()+" Unknown Error Occurred")})).catch((function(e){alert("error occurred "+e.toString())})),v.a.get(window.API_URL+"/receipts/pgs/").then((function(e){200==e.status?r.setState({cust_pgs:e.data.Data}):alert(e.error.error.toString()+" Unknown Error Occurred")})).catch((function(e){alert("error occurred "+e.toString())})),v.a.get(window.API_URL+"/receipts/hss/",r.state).then((function(e){200===e.status?r.setState({hss:e.data.Data}):alert("erro occurred: Unknown error occurred")})).catch((function(e){alert("error occurred "+e.toString())}))},r.get_pdf=function(e){console.log(r.state),r.setState({loaded:!0});var t={name:r.state.name,address:r.state.address,pg:r.state.pg,date:r.state.date.toISOString(),items:r.state.items,discount_given:r.state.discount_given,total_amount:r.state.total_amount,total_discount:r.state.total_discount,amount_payable:r.state.amount_payable,cgst:r.state.cgst,sgst:r.state.sgst,check:r.state.check};e.preventDefault(),console.log(t),v.a.post(window.API_URL+"/receipts/",t).then((function(e){r.setState({loaded:!1}),200===e.status?window.open(window.API_URL+e.data.Data.receipt_link):(alert("erro occurred: Unknown error occurred"),r.setState({loaded:!1}))})).catch((function(e){alert("error occurred "+e.toString()),r.setState({loaded:!1})}))},r.handleChange=function(e){var t=e.target.value;"discount_given"!==e.target.name&&"cgst"!==e.target.name&&"sgst"!==e.target.name||""===t&&(t=0),r.setState(Object(c.a)({},e.target.name,t),(function(){var e=r.find_sum();r.setState({total_amount:e[0],amount_payable:e[2],total_discount:e[1],cgst:e[3],sgst:e[4]})}))},r.invoice_skip=function(e){r.setState({check:!r.state.check})},r.auto_gst_change=function(e){r.setState({auto_gst:!r.state.auto_gst},(function(){var e=r.find_sum();r.setState({total_amount:e[0],amount_payable:e[2],total_discount:e[1],cgst:e[3],sgst:e[4]})}))},r.add_item=function(){var e={id:r.state.items.length+1,description:"",hs:"",scheme:"None",mrp:0,quantity:0,rate:0,amount:0,deleteable:!0};try{var t=[].concat(Object(l.a)(r.state.items),[e]);r.setState({items:t})}catch(a){alert("error occurred "+a.toString()),r.setState({loaded:!1})}},r.delete_item=function(e){try{var t=e.currentTarget.parentNode.parentNode.getAttribute("data-key"),a=r.state.items.filter((function(e){return parseInt(e.id)!==parseInt(t)}));r.setState({items:a},(function(){var e=r.find_sum();r.setState({total_amount:e[0],amount_payable:e[2],total_discount:e[1],cgst:e[3],sgst:e[4]})}))}catch(n){alert("error occurred "+n.toString()),r.setState({loaded:!1})}},r.update_item=function(e){try{var t=e.currentTarget.parentNode.parentNode.parentNode.getAttribute("data-key"),a=e.currentTarget.getAttribute("name"),n=e.currentTarget.value;if("description"!==a&&"hs"!==a&&"scheme"!==a&&""===n)return;r.state.items.length&&r.state.items.map((function(e){return parseInt(e.id)===parseInt(t)&&(e[a]=n),e}));var s=r.find_sum();r.setState({total_amount:s[0],amount_payable:s[2],total_discount:s[1],cgst:s[3],sgst:s[4]})}catch(o){alert("error occurred "+o.toString()),r.setState({loaded:!1})}},r.new_bill=function(){r.setState({name:"Shri ",address:"",pg:"",check:!1,auto_gst:!0,items:[{id:1,description:"",hs:"",scheme:"None",mrp:0,quantity:0,rate:0,amount:0,deleteable:!1}],date:new Date,discount_given:0,total_amount:0,total_discount:0,amount_payable:0,errors:[],cgst:0,sgst:0})},r.find_sum=function(e,t){var a=new Array(5).fill(0);try{var n=parseFloat(r.state.discount_given?r.state.discount_given:0);if(r.state.items.forEach((function(e){var t=parseFloat(e.rate),n=parseFloat(e.quantity);a[0]=parseFloat(a[0])+parseFloat(t)*parseFloat(n)})),a[1]=n,r.state.auto_gst)var s=9*(a[0]-n)/100,o=9*(a[0]-n)/100;else s=1*r.state.sgst,o=1*r.state.cgst;return o=parseFloat(o.toFixed(2)),s=parseFloat(s.toFixed(2)),console.log(a[0]+" "+n+" "+o+" "+s),console.log(a[0]-n+o),a[2]=Math.round(a[0]-n+o+s),console.log(a[2]),a[0]=Math.round(a[0]),a[3]=o,a[4]=s,a}catch(l){alert("error occurred "+l.toString()),r.setState({loaded:!1})}},r.state=(n={name:"Shri ",address:"",pg:"",check:!1,auto_gst:!0,items:[{id:1,description:"",hs:"",scheme:"None",mrp:0,quantity:0,rate:0,amount:0,deleteable:!1}],date:new Date,discount_given:0,total_amount:0,total_discount:0,amount_payable:0,errors:[],products:[],hss:[]},Object(c.a)(n,"pg",[]),Object(c.a)(n,"cust_names",[]),Object(c.a)(n,"cust_addresses",[]),Object(c.a)(n,"cust_pgs",[]),Object(c.a)(n,"addresses",[]),Object(c.a)(n,"loaded",!1),Object(c.a)(n,"cgst",0),Object(c.a)(n,"sgst",0),n);var s=r.find_sum();return r.setState({total_amount:s[0],amount_payable:s[2],total_discount:s[1],cgst:s[3],sgst:s[4]}),r.keyMap={ADD:"shift+a"},r.handlers={ADD:function(e){r.add_item()}},r}return Object(m.a)(a,[{key:"render",value:function(){var e=this,t=this.state.products.length?this.state.products.map((function(e){return r.a.createElement("option",{key:e.id},e.name)})):" ",a=0,n=this.state.cust_names.length?this.state.cust_names.map((function(e){return a++,r.a.createElement("option",{key:a},e.name)})):" ";a=0;var s=this.state.cust_addresses.length?this.state.cust_addresses.map((function(e){return r.a.createElement("option",{key:a},e.address)})):" ",o=this.state.hss.length?this.state.hss.map((function(e){return r.a.createElement("option",{key:e.id},e.name)})):" ";a=0;var l=this.state.cust_pgs.length?this.state.cust_pgs.map((function(e){return r.a.createElement("option",{key:a},e.pg)})):" ",c=this.state.items.length?this.state.items.map((function(t){return r.a.createElement("div",{"data-key":t.id,className:"row"},r.a.createElement("div",{className:"column"},r.a.createElement("label",{style:{color:"white"}},r.a.createElement("b",null,"Description")),r.a.createElement("div",{style:{width:"100%"}},r.a.createElement("input",{title:t.description,list:"products",onChange:e.update_item,type:"text",value:t.description,className:"form-control item",name:"description",placeholder:"Product Descrition",required:!0}))),r.a.createElement("div",{className:"column"},r.a.createElement("label",{style:{color:"white"}},r.a.createElement("b",null,"HSN/SAC")),r.a.createElement("div",{style:{width:"100%"}},r.a.createElement("input",{title:t.hs,list:"hss",onChange:e.update_item,type:"text",value:t.hs,className:"form-control item",name:"hs",placeholder:"HSN/SAC"}))),r.a.createElement("div",{className:"column"},r.a.createElement("label",{style:{color:"white"}},r.a.createElement("b",null,"SCHEME")),r.a.createElement("div",{style:{width:"100%"}},r.a.createElement("input",{title:t.scheme,onChange:e.update_item,type:"text",value:t.scheme,className:"form-control item",name:"scheme",placeholder:"SCHEME"}))),r.a.createElement("div",{className:"column"},r.a.createElement("label",{style:{color:"white"}},r.a.createElement("b",null,"MRP")),r.a.createElement("div",{style:{width:"100%"}},r.a.createElement("input",{title:t.mrp,step:"any",onChange:e.update_item,type:"number",value:t.mrp,className:"form-control item",name:"mrp",min:"0",placeholder:"MRP",required:!0}))),r.a.createElement("div",{className:"column"},r.a.createElement("label",{style:{color:"white"}},r.a.createElement("b",null,"QUANTITY")),r.a.createElement("div",{style:{width:"100%"}},r.a.createElement("input",{title:t.quantity,onChange:e.update_item,type:"number",value:t.quantity,className:"form-control item",name:"quantity",min:"0",placeholder:"QUANTITY"}))),r.a.createElement("div",{className:"column"},r.a.createElement("label",{style:{color:"white"}},r.a.createElement("b",null,"Rate")),r.a.createElement("div",{style:{width:"100%"}},r.a.createElement("input",{title:t.rate,step:"any",autoComplete:"off",onChange:e.update_item,type:"number",value:t.rate,className:"form-control item",min:"0",name:"rate",placeholder:"RATE",required:!0}))),r.a.createElement("div",{className:"column"},r.a.createElement("label",{style:{color:"white"}},r.a.createElement("b",null,"Amount")),r.a.createElement("div",{style:{width:"100%"}},r.a.createElement("input",{title:t.amount,autoComplete:"off",onChange:e.update_item,type:"number",step:"1",value:(t.rate*t.quantity).toFixed(2),readOnly:"true",className:"form-control item ",min:"0",name:"amount",placeholder:"AMOUNT",required:!0}))),r.a.createElement("div",{className:"input-group-postpend column",style:{width:"10%"}},t.deleteable?r.a.createElement("span",{onClick:e.delete_item},r.a.createElement("i",{className:"fa fa-times-circle add-btn"})):r.a.createElement("span",{onClick:e.add_item,id:"add-item"},r.a.createElement("i",{className:"fa fa-plus-circle add-btn"}))))})):"";return r.a.createElement(_.HotKeys,{keyMap:this.keyMap,handlers:this.handlers},r.a.createElement("div",{className:"container"},r.a.createElement(y.a,{show:this.state.loaded,message:r.a.createElement("div",{class:"spinner-border",role:"status"},r.a.createElement("span",{class:"sr-only"},"Loading..."))},r.a.createElement("div",{className:"d-flex justify-content-center h-100"},r.a.createElement(f,null),r.a.createElement("div",{style:{maxWidth:"2000px"},className:"card float-left"},r.a.createElement("div",{className:"card-header"},r.a.createElement("h3",null,window.RECIEPT_MESSAGE)),r.a.createElement("div",{className:"col-sm-12 col-sm-offset-4 card-body"},r.a.createElement("form",{onSubmit:this.get_pdf,id:"login_form",autoComplete:"off"},r.a.createElement("label",{style:{color:"white"},className:"float-left",for:"name"},r.a.createElement("b",null,"Enter Name")),r.a.createElement("div",{className:"input-group form-group"},r.a.createElement("input",{onChange:this.handleChange,type:"text",list:"customers",value:this.state.name,className:"form-control input-sm",id:"name",name:"name",placeholder:"Enter Full Name",required:!0})),r.a.createElement("label",{style:{color:"white"},className:"float-left",for:"address"},r.a.createElement("b",null,"Enter Address:")),r.a.createElement("div",{className:"input-group form-group"},r.a.createElement("input",{onChange:this.handleChange,type:"textarea",list:"addresses",value:this.state.address,className:"form-control",id:"address",placeholder:"Enter Address",name:"address"})),r.a.createElement("label",{style:{color:"white"},className:"float-left",for:"pg"},r.a.createElement("b",null,"PAN/GST No:")),r.a.createElement("div",{className:"input-group form-group"},r.a.createElement("input",{onChange:this.handleChange,list:"pgs",value:this.state.pg,id:"pg",placeholder:"Enter PAN/GST",name:"pg",className:"form-control"})),r.a.createElement("label",{style:{color:"white"},className:"float-left",for:"date"},r.a.createElement("b",null,"Enter Date")),r.a.createElement("div",{className:"input-group form-group"},r.a.createElement(h.a,{selected:this.state.date,className:"form-control",dateFormat:"dd-MMMM-yyyy",onChange:function(t){return e.setState({date:t})}})),r.a.createElement("div",{className:"input-group form-group float-left"},r.a.createElement("input",{onChange:this.auto_gst_change,id:"auto_gst",type:"checkbox",defaultChecked:this.state.auto_gst}),r.a.createElement("label",{style:{color:"white"}},"Automatic calculate GST")),r.a.createElement("div",{id:"items-cart"},c,r.a.createElement("div",null)),r.a.createElement("div",{className:"input-group form-group float-left price-tag"},r.a.createElement("div",{className:"input-group-prepend"},r.a.createElement("span",{className:"input-group-text"},r.a.createElement("i",null,"CG 9%"))),r.a.createElement("input",{type:"number",step:"any",onChange:this.handleChange,name:"cgst",value:this.state.cgst,className:"form-control",min:"0"})),r.a.createElement("div",{className:"input-group form-group float-left price-tag"},r.a.createElement("div",{className:"input-group-prepend"},r.a.createElement("span",{className:"input-group-text"},r.a.createElement("i",null,"SG 9%"))),r.a.createElement("input",{step:"any",type:"number",onChange:this.handleChange,name:"sgst",value:this.state.sgst,className:"form-control",min:"0"})),r.a.createElement("div",{className:"input-group form-group float-right price-tag"},r.a.createElement("div",{className:"input-group-prepend"},r.a.createElement("span",{className:"input-group-text"},r.a.createElement("i",{className:"fa fa-rupee"}),"(Total)")),r.a.createElement("input",{step:"any",type:"number",className:"form-control",value:this.state.amount_payable,min:"0",readOnly:!0,id:"amount"})),r.a.createElement("div",{className:"input-group form-group float-right price-tag"},r.a.createElement("div",{className:"input-group-prepend"},r.a.createElement("span",{className:"input-group-text"},r.a.createElement("i",{className:"fa fa-rupee"}),"(Disc)")),r.a.createElement("input",{type:"number",onChange:this.handleChange,name:"discount_given",value:this.state.discount_given,className:"form-control",min:"0",max:this.state.total_amount})),r.a.createElement("div",{className:"input-group form-group float-left"},r.a.createElement("input",{onChange:this.invoice_skip,id:"check",type:"checkbox",checked:this.state.check}),r.a.createElement("label",{style:{color:"white"}},"Invoice")),r.a.createElement("div",{className:"form-group"},r.a.createElement("input",{type:"submit",value:"Submit",className:"btn-lg login_btn"})),r.a.createElement("div",{className:"form-group"},r.a.createElement("button",{type:"button",onClick:this.new_bill,className:"btn-sm active"},"New Bill"))),r.a.createElement("datalist",{id:"products"},t),r.a.createElement("datalist",{id:"hss"},o),r.a.createElement("datalist",{id:"customers"},n),r.a.createElement("datalist",{id:"addresses"},s),r.a.createElement("datalist",{id:"pgs"},l)))))))}}]),a}(n.Component),w=a(137),S=function(e){Object(u.a)(a,e);var t=Object(d.a)(a);function a(e){var n;return Object(i.a)(this,a),(n=t.call(this,e)).update_rows=function(e){try{var t=n.state.datatable.columns,a=n.state.datatable.rows;e.forEach((function(e){console.log(e),e.clickEvent=function(){return n.handleClick(e.receipt_pdf)},e.hover=function(){return function(){console.log("hillo")}},a.push(e)}));var r={columns:t,rows:a};n.setState({datatable:r})}catch(s){alert("error occurred "+s.toString())}},n.componentDidMount=function(){v.a.get(window.API_URL+"/receipts/customers/").then((function(e){200==e.status?n.update_rows(e.data.Data):alert(e.error.error.toString()+" Unknown Error Occurred")})).catch((function(e){alert("error occurred "+e.toString())}))},n.state={datatable:{columns:[{label:"Name",field:"name",width:150},{label:"Address",field:"address",width:270},{label:"PAN/GST No",field:"pg",width:200},{label:"DateAndTime",field:"DateAndTime",width:150}],rows:[]}},n}return Object(m.a)(a,[{key:"handleClick",value:function(e){window.open(window.API_URL+e,"_blank")}},{key:"render",value:function(){return r.a.createElement("div",null,r.a.createElement(f,null),r.a.createElement("div",{style:{backgroundColor:"black",fontSize:"25px",color:"green"}},r.a.createElement(w.c,{className:"table-responsive",style:{cursor:"pointer",textAlign:"left",backgroundColor:"black",fontSize:"20px",color:"white"},hover:!0,entriesOptions:[10,20,25],entries:10,pagesAmount:4,data:this.state.datatable,searchTop:!0,searchBottom:!1})))}}]),a}(n.Component),k=(a(290),a(8));var C=function(){return r.a.createElement(g.a,null,r.a.createElement("div",{className:"App"},r.a.createElement(k.a,{exact:!0,path:"/menu",component:f}),r.a.createElement(k.a,{exact:!0,path:"/customer",component:S}),r.a.createElement(k.a,{exact:!0,path:"/home",component:N}),r.a.createElement(k.a,{exact:!0,path:"/",component:N})))};Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));o.a.render(r.a.createElement(r.a.StrictMode,null,r.a.createElement(C,null)),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()})).catch((function(e){console.error(e.message)}))}},[[138,1,2]]]);
//# sourceMappingURL=main.d4910464.chunk.js.map